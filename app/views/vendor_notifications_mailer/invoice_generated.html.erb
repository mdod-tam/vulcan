<div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
  <h1 style="color: #1a365d;">New Invoice Generated</h1>

  <p>Dear <%= @vendor.business_name %>,</p>

  <p>A new invoice has been generated for your recent voucher transactions.</p>

  <div style="background-color: #f7fafc; padding: 20px; border-radius: 8px; margin: 20px 0;">
    <h2 style="color: #2d3748; margin-top: 0;">Invoice Details</h2>
    <p><strong>Invoice Number:</strong> <%= @invoice.invoice_number %></p>
    <p><strong>Period:</strong> <%= @invoice.period_start.strftime("%B %d, %Y") %> - <%= @invoice.period_end.strftime("%B %d, %Y") %></p>
    <p><strong>Total Amount:</strong> <%= number_to_currency(@invoice.total_amount) %></p>
  </div>

  <h3 style="color: #2d3748;">Transaction Summary</h3>
  <table style="width: 100%; border-collapse: collapse; margin: 20px 0;">
    <thead>
      <tr style="background-color: #edf2f7;">
        <th style="padding: 12px; text-align: left; border-bottom: 2px solid #cbd5e0;">Date</th>
        <th style="padding: 12px; text-align: left; border-bottom: 2px solid #cbd5e0;">Voucher</th>
        <th style="padding: 12px; text-align: right; border-bottom: 2px solid #cbd5e0;">Amount</th>
      </tr>
    </thead>
    <tbody>
      <% @transactions.each do |transaction| %>
        <tr>
          <td style="padding: 12px; border-bottom: 1px solid #e2e8f0;">
            <%= transaction.processed_at.strftime("%B %d, %Y") %>
          </td>
          <td style="padding: 12px; border-bottom: 1px solid #e2e8f0;">
            <%= transaction.voucher.code %>
          </td>
          <td style="padding: 12px; border-bottom: 1px solid #e2e8f0; text-align: right;">
            <%= number_to_currency(transaction.amount) %>
          </td>
        </tr>
      <% end %>
    </tbody>
    <tfoot>
      <tr style="background-color: #f7fafc;">
        <td colspan="2" style="padding: 12px; font-weight: bold;">Total</td>
        <td style="padding: 12px; font-weight: bold; text-align: right;">
          <%= number_to_currency(@invoice.total_amount) %>
        </td>
      </tr>
    </tfoot>
  </table>

  <div style="background-color: #ebf8ff; padding: 20px; border-radius: 8px; margin: 20px 0;">
    <h3 style="color: #2b6cb0; margin-top: 0;">Next Steps</h3>
    <p>Our accounting team will review this invoice and process payment within 30 days. You will receive another notification when the check has been issued.</p>
    <p>A PDF copy of this invoice is attached for your records.</p>
  </div>

  <div style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #e2e8f0; font-size: 14px; color: #718096;">
    <p>If you have any questions about this invoice, please contact our support team at support@example.com.</p>
    <p>Thank you for participating in our program!</p>
  </div>
</div>
